{% extends "base.html" %}

{% block title %}
    {% if modo == "editar" %}
        Editar Exercício - Daily Trainer
    {% else %}
        Novo Exercício - Daily Trainer
    {% endif %}
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-10 col-lg-8">
        <h1 class="h4 mb-3">
            {% if modo == "editar" %}
                Editar Exercício
            {% else %}
                Novo Exercício
            {% endif %}
        </h1>

        <form method="post" action="{{ action_url }}">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="nome" class="form-label">Nome</label>
                    <input
                        type="text"
                        class="form-control"
                        id="nome"
                        name="nome"
                        required
                        value="{{ exercicio.nome if exercicio else '' }}"
                    >
                </div>
                <div class="col-md-6 mb-3">
                    <label for="apelido" class="form-label">Apelido</label>
                    <input
                        type="text"
                        class="form-control"
                        id="apelido"
                        name="apelido"
                        value="{{ exercicio.apelido if exercicio and exercicio.apelido else '' }}"
                        placeholder="Como o personal/aluno costuma chamar (opcional)"
                    >
                </div>
            </div>

            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="grupo_muscular" class="form-label">Grupo Muscular</label>
                    <input
                        type="text"
                        class="form-control"
                        id="grupo_muscular"
                        name="grupo_muscular"
                        value="{{ exercicio.grupo_muscular if exercicio and exercicio.grupo_muscular else '' }}"
                        placeholder="Ex.: bíceps, peito, costas..."
                    >
                </div>

                <div class="col-md-4 mb-3">
                    <label for="publico_alvo" class="form-label">Público Alvo</label>
                    {% set publico_atual = exercicio.publico_alvo if exercicio else 'unissex' %}
                    <select
                        class="form-select"
                        id="publico_alvo"
                        name="publico_alvo"
                        required
                    >
                        <option value="masculino" {% if publico_atual == 'masculino' %}selected{% endif %}>
                            Masculino
                        </option>
                        <option value="feminino" {% if publico_atual == 'feminino' %}selected{% endif %}>
                            Feminino
                        </option>
                        <option value="unissex" {% if publico_atual == 'unissex' %}selected{% endif %}>
                            Unissex
                        </option>
                    </select>
                </div>

                <div class="col-md-4 mb-3">
                    <label class="form-label">Exercício Padrão?</label>
                    {% set padrao_atual = exercicio.padrao if exercicio else False %}
                    <div class="form-check">
                        <input
                            class="form-check-input"
                            type="checkbox"
                            id="padrao"
                            name="padrao"
                            value="true"
                            {% if padrao_atual %}checked{% endif %}
                        >
                        <label class="form-check-label" for="padrao">
                            Usado como sugestão automática de treino
                        </label>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3 mb-3">
                    <label for="series_padrao" class="form-label">Séries padrão</label>
                    <input
                        type="number"
                        min="1"
                        class="form-control"
                        id="series_padrao"
                        name="series_padrao"
                        required
                        value="{{ exercicio.series_padrao if exercicio else 3 }}"
                    >
                </div>
                <div class="col-md-3 mb-3">
                    <label for="repeticoes_padrao" class="form-label">Repetições padrão</label>
                    <input
                        type="number"
                        min="1"
                        class="form-control"
                        id="repeticoes_padrao"
                        name="repeticoes_padrao"
                        required
                        value="{{ exercicio.repeticoes_padrao if exercicio else 10 }}"
                    >
                </div>
            </div>

            <div class="mb-3">
                <label for="descricao" class="form-label">Descrição / Observações técnicas</label>
                <textarea
                    class="form-control"
                    id="descricao"
                    name="descricao"
                    rows="3"
                    placeholder="Detalhes de execução, variações, pegada, postura..."
                >{% if exercicio and exercicio.descricao %}{{ exercicio.descricao }}{% endif %}</textarea>
            </div>

            <div class="d-flex justify-content-between">
                <a href="/web/exercicios" class="btn btn-secondary">
                    Voltar
                </a>

                <button type="submit" class="btn btn-primary">
                    {% if modo == "editar" %}Salvar alterações{% else %}Criar exercício{% endif %}
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
